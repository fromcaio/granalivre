@startuml GranaLivreUseCases
left to right direction

skinparam packageBorderColor transparent
skinparam packageBackgroundColor transparent

actor "Usuário" as User

rectangle "GranaLivre" {

    ' ----------------------
    ' Bloco: Usuário
    ' ----------------------
    rectangle {
        usecase "Gerenciar Usuário" as UC_GerenciarUsuario
        usecase "Autenticar Usuário" as UC_AutenticarUsuario
        UC_GerenciarUsuario ..> UC_AutenticarUsuario : <<extends>>
    }

    ' ----------------------
    ' Bloco: Resumo Financeiro
    ' ----------------------
    rectangle {
        usecase "Visualizar Resumo Financeiro" as UC_Resumo
        usecase "Visualizar Gráfico" as UC_GraficoResumo
        usecase "Visualizar Transações Recentes" as UC_TransacoesRecentes
        usecase "Visualizar Despesas a Vencer" as UC_DespesasVencer
        usecase "Visualizar Patrimônio Total" as UC_PatrimonioTotal
        usecase "Adicionar Entrada" as UC_AdicionarEntrada
        usecase "Adicionar Saída" as UC_AdicionarSaida

        ' relações internas
        UC_Resumo ..> UC_GraficoResumo : <<includes>>
        UC_Resumo ..> UC_TransacoesRecentes : <<includes>>
        UC_Resumo ..> UC_DespesasVencer : <<includes>>
        UC_Resumo ..> UC_PatrimonioTotal : <<includes>>
        UC_Resumo ..> UC_AdicionarEntrada : <<extends>>
        UC_Resumo ..> UC_AdicionarSaida : <<extends>>
    }

    ' ----------------------
    ' Bloco: Movimentações
    ' ----------------------
    rectangle {
        usecase "Gerenciar Entradas" as UC_Entradas
        usecase "Gerenciar Saídas" as UC_Saidas
        usecase "Gerenciar Automações" as UC_Automacoes

        ' Relações entre movimentações e contas
        usecase "Selecionar Conta Corrente" as UC_SelecionarConta

        UC_Entradas ..> UC_SelecionarConta : <<includes>>
        UC_Saidas ..> UC_SelecionarConta : <<includes>>
        UC_Automacoes ..> UC_SelecionarConta : <<includes>>

        ' Quando a automação executa, pode gerar uma entrada ou saída
        usecase "Executar Automação" as UC_ExecutarAutomacao
        UC_Automacoes ..> UC_ExecutarAutomacao : <<includes>>
        UC_ExecutarAutomacao ..> UC_AdicionarEntrada : <<extends>>
        UC_ExecutarAutomacao ..> UC_AdicionarSaida : <<extends>>
    }

    ' ----------------------
    ' Bloco: Conta Corrente, Investimentos e Patrimônio
    ' ----------------------
    rectangle {
        usecase "Gerenciar Conta Corrente" as UC_ContaCorrente
        usecase "Gerenciar Investimentos" as UC_Investimentos
        usecase "Gerenciar Patrimônio" as UC_Patrimonio
        usecase "Logout" as UC_Sair

        ' Relações entre esses módulos
        UC_Investimentos ..> UC_SelecionarConta : <<includes>>
        UC_Patrimonio ..> UC_SelecionarConta : <<includes>>

        ' Patrimônio ligado à conta de compra e à conta de liquidação
        usecase "Selecionar Conta de Compra" as UC_ContaCompra
        usecase "Selecionar Conta de Liquidação" as UC_ContaLiquidacao

        UC_Patrimonio ..> UC_ContaCompra : <<includes>>
        UC_Patrimonio ..> UC_ContaLiquidacao : <<includes>>
    }
}

' ----------------------
' Ligações com o ator
' ----------------------
User --> UC_GerenciarUsuario
User --> UC_Resumo
User --> UC_Entradas
User --> UC_Saidas
User --> UC_Automacoes
User --> UC_ContaCorrente
User --> UC_Investimentos
User --> UC_Patrimonio
User --> UC_Sair

@enduml